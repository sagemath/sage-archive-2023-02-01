// See https://aka.ms/devcontainer.json for format details.
{
    "name": "CoCalc Docker",
    "image": "sagemathinc/cocalc",
    "containerEnv": {
        "MAKE": "make -j12"
    },
    // Run commands after the container is created.
    // libgmp.a is broken and leads to a build failure of ecm.
    "postCreateCommand": ".devcontainer/post_create.sh && rm -f /usr/local/sage/local/lib/libgmp.a",
    // Run commands after the container is started.
    "postStartCommand": "make configure && ./configure --enable-build-as-root --prefix=/usr/local/sage/local --with-sage-venv",
    "extensions": [
        "ms-python.python"
    ]
}
