#!sage.bin

import os, sys

os.chdir(sys.argv[1])

if len(sys.argv) < 3:
    print "You must give a file argument"
    sys.exit(1)

file    = sys.argv[2]
options = ' '.join(sys.argv[3:])

if file[0] == '-':
    print "Unknown option: %s"%file
    print "usage: sage [options]"
    print "Try 'sage -h' for more information."
    sys.exit(1)

if file[-5:] == '.sage':
    if os.system('sage -preparse %s'%file):
        sys.exit(1)
    e = os.system('sage-python %s.py %s'%(file[:-5], options))
    sys.exit(e)
elif file[-5:] == '.spyx':
    e = os.system('sage-sagex %s'%file)
    sys.exit(e)
else:
    e = os.system('sage-python %s %s'%(file, options))
    if e:
        print "sage: Error running %s using Python"%file
    sys.exit(e)




